# Building a Simple Data Analysis Web App with Streamlit

## Introduction

Welcome to an exercise on building a simple Data Analysis application in Python using Streamlit with GitHub Copilot! In this exercise, you will learn how to create an interactive tool that can visualize data from a CSV file.

<img src="../../../images/Streamlit-full-app.png" alt="Streamlit Full App" width="600">

## Pre-requisites

- Basic understanding of Python programming.
- Familiarity with the command line and terminal.
- Python 3.11+ installed on your local machine.
- Visual Studio Code.
- Active GitHub Copilot extension for Visual Studio Code.

### Create a Python Virtual Environment

To create a Python virtual environment, run the following command in the VS Code terminal:

```bash
python -m venv streamenv #(you can use any name instead of streamenv)
```

### Activate the Virtual Environment

- On Windows, run:

```bash
.\streamenv\Scripts\activate
```

- On macOS and Linux, run:

```bash
source streamenv/bin/activate
```



### Sample CSV file

- [CSV File - complete/csv/usage.csv](../../../complete/csv/usage.csv)

The CSV file is a mocked data of a sample usage statistics for GitHub Copilot. The file contains fictional interaction data between Copilot and users, breaking down the data by programming language, development editor used, and metrics concerning the suggestions and acceptances of those suggestions. Here's an explanation of the various columns:

- breakdown_language: The programming language for which the suggestions were provided.
- breakdown_editor: The code editor (e.g., Visual Studio Code or Visual Studio) where Copilot was used.
- breakdown_suggestions_count: The total number of suggestions given by Copilot for a particular language-editor combination.
- breakdown_acceptances_count: The number of suggestions that were accepted by users for that particular combination.
- breakdown_lines_suggested: Total lines of code suggested by Copilot.
- breakdown_lines_accepted: Total lines of code accepted (i.e., used) by users.
- breakdown_active_users: The number of active users who received suggestions for that language-editor pair on a given day.
- day: The date for which the data was recorded.
- total_suggestions_count: Overall number of suggestions made by Copilot across all languages and editors on that day.
- total_acceptances_count: Total number of Copilot suggestions accepted on that day, regardless of programming language or editor.
- total_lines_suggested: Aggregate count of the suggested lines of code for that day.
- total_lines_accepted: Aggregate count of the lines of code accepted by users for that day.
- total_active_users: The overall number of users who interacted with Copilot on that particular day.

## What is Streamlit

Streamlit is an open-source Python framework that makes it easy to build beautiful custom web apps for machine learning and data science. With Streamlit, you can turn data scripts into shareable web apps with just a few lines of code.

### Simple Streamlit Code Example

Here's a fundamental example of using Streamlit to create a web app:

```python
import streamlit as st

# Title of the web app
st.title('Square Number Calculator')

# User input field
input_num = st.number_input('Enter a number', value=0)

# Calculating the square and displaying it
square = input_num ** 2
st.write('The square of', input_num, 'is', square)
```

### Running the Streamlit App

To run the Streamlit app, save the code to a Python file (e.g., `app.py`) and run the following command in your terminal:

```bash
streamlit run app.py
```

# Start the Exercise

## Exercise 1: Create the initial Streamlit code

- Navigate to the exercise/python/streamlit directory in your project workspace.
- Create a new Python file named `app.py`.
- Install the Streamlit library by running the following command in the Terminal (Ensure that your virtual environment is activated):

```bash
pip install streamlit
```

- Create the Streamlit App by interacting with Copilot.

> Ask Copilot Chat to suggest an initial Streamlit page layout with a feature to upload CSV files and display the data. Use this prompt:

```
Create a Streamlit app that accepts a CSV File upload and displays the data.
```

After getting the suggestion, use the "Insert at Cursor" button found in the Chat interface. Make sure that your app.py is the active file in Visual Studio Code. 

If there are existing code in your app.py, press Ctrl + A and select the entire code before clicking the "Insert at Cursor" button. This will replace the existing code in the app.py file with the Streamlit code generated by Copilot.

## Run the Streamlit App

To see your Streamlit app in action:

- Open the Terminal in VS Code with ``Ctrl + ` `` (backtick).
- Make sure that your virtual environment is activated.

```bash
.\streamenv\Scripts\activate #(windows)
source streamenv/bin/activate #(macOS/Linux)
```

```
cd exercise\python\streamlit
streamlit run app.py
```

### Check your Browser

The Streamlit app should open in your default web browser. You can now interact with the app by uploading a CSV file and visualizing the data.

Select the file under [complete/csv/usage.csv](../../../complete/csv/usage.csv) to test the app.

Once uploaded, a table should display below the upload component showing the data from the CSV file.

<img src="../../../images/Streamlit-table.png" alt="Line Chart" width="400">

## Exercise 2: Add a line chart to visualize the data

- Ask Copilot to suggest a line chart that visualizes a comparison of the total number of suggestions made by Copilot across versus the total number of acceptance on a given day.

> Tip: Tell copilot to use the exact names of the columns available from the CSV file.

<img src="../../../images/Streamlit-Line-Chart.png" alt="Line Chart" width="400">

## Exercise 3: Add a date filter using a date picker and sidebar

A Side bar is a built-in feature in Streamlit that allows you to add widgets to the side of your app. In this exercise, you will add a date picker widget to the sidebar to filter the data based on the selected date.

In your app.py, highlight the entire code and ask Copilot to suggest a sidebar with a date picker widget. Add an instruction to use the date picker to filter the data based on the selected date and include an error handling message if no data is found for the selected date range.

## Exercise 4: Test the app and resolve any errors with the help of Copilot

You may encounter errors while running the app. Use the error messages to ask Copilot for suggestions on how to resolve them.

> Tip: Copy the error message and paste it in the Copilot chat to get suggestions on how to fix the error.

## Let the group know you're done

When you've completed the exercises, let the group know you're done and share your experience with the exercise. Feel free to ask questions or share any challenges you faced while working on the exercise.

## Extra Challenge

Based on what you know about the data, think of additional features or visualizations you can add to the Streamlit app. Ask Copilot to suggest code snippets for these features and implement them in your app. For example, you can add a bar chart to compare the total number of suggestions and acceptances for different programming languages.



